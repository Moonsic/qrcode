webpackJsonp([2],{"/KOG":function(e,t){},"2qUn":function(e,t){},"4leg":function(e,t,i){"use strict";var s=i("2sLL"),n=(s.a,{name:"RecordFooter",components:{XButton:s.a},data:function(){return{}},computed:{},created:function(){},methods:{btn:function(){this.$router.push({path:"/addRecord",query:{}})}},filters:{}}),a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"module-botton"},[i("x-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.btn(t)}}},[e._v("添加记录")])],1)},staticRenderFns:[]};var o=i("VU/8")(n,a,!1,function(e){i("/KOG")},null,null);t.a=o.exports},"B+dZ":function(e,t){},WF4q:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("mvHQ"),n=i.n(s),a=i("KRg4"),o=(a.a,Boolean,String,String,String,Array,Boolean,String,String,Boolean,{name:"search",mixins:[a.a],props:{required:{type:Boolean,default:!1},placeholder:String,cancelText:String,value:{type:String,default:""},results:{type:Array,default:function(){return[]}},autoFixed:{type:Boolean,default:!0},top:{type:String,default:"0px"},position:{type:String,default:"fixed"},autoScrollToTop:Boolean},created:function(){this.value&&(this.currentValue=this.value)},computed:{fixPosition:function(){return this.isFixed?"absolute"===this.position?"absolute":"fixed":"static"}},methods:{emitEvent:function(){var e=this;this.$nextTick(function(){e.$emit("input",e.currentValue),e.$emit("on-change",e.currentValue)})},onComposition:function(e,t){"start"===t&&(this.onInput=!0),"end"===t&&(this.onInput=!1,this.emitEvent()),"input"===t&&(this.onInput||this.emitEvent())},clear:function(){this.currentValue="",this.emitEvent(),this.isFocus=!0,this.setFocus(),this.autoFixed&&!this.isFixed&&(this.isFixed=!0)},cancel:function(){this.isCancel=!0,this.currentValue="",this.emitEvent(),this.isFixed=!1,this.$emit("on-cancel")},handleResultClick:function(e){this.$emit("result-click",e),this.$emit("on-result-click",e),this.isCancel=!0,this.isFixed=!1},touch:function(){this.isCancel=!1,this.autoFixed&&(this.isFixed=!0),this.$emit("on-touch")},setFocus:function(){this.$refs.input.focus()},setBlur:function(){this.$refs.input.blur()},onFocus:function(){this.isFocus=!0,this.$emit("on-focus"),this.touch()},onBlur:function(){this.isFocus=!1,this.$emit("on-blur")}},data:function(){return{onInput:!1,currentValue:"",isCancel:!0,isFocus:!1,isFixed:!1}},watch:{isFixed:function(e){!0===e&&(this.setFocus(),this.isFocus=!0,this.autoScrollToTop&&setTimeout(function(){window.scrollTo(0,0)},150))},value:function(e){this.currentValue=e}}}),r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vux-search-box",class:{"vux-search-fixed":e.isFixed},style:{top:e.isFixed?e.top:"",position:e.fixPosition}},[i("div",{staticClass:"weui-search-bar",class:{"weui-search-bar_focusing":!e.isCancel||e.currentValue}},[e._t("left"),e._v(" "),i("form",{staticClass:"weui-search-bar__form",attrs:{action:"."},on:{submit:function(t){t.preventDefault(),e.$emit("on-submit",e.value)}}},[i("label",{directives:[{name:"show",rawName:"v-show",value:!e.isFixed&&e.autoFixed,expression:"!isFixed && autoFixed"}],staticClass:"vux-search-mask",attrs:{for:"search_input_"+e.uuid},on:{click:e.touch}}),e._v(" "),i("div",{staticClass:"weui-search-bar__box"},[i("i",{staticClass:"weui-icon-search"}),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],ref:"input",staticClass:"weui-search-bar__input",attrs:{type:"search",autocomplete:"off",id:"search_input_"+e.uuid,placeholder:e.placeholder,required:e.required},domProps:{value:e.currentValue},on:{focus:e.onFocus,blur:e.onBlur,compositionstart:function(t){e.onComposition(t,"start")},compositionend:function(t){e.onComposition(t,"end")},input:[function(t){t.target.composing||(e.currentValue=t.target.value)},function(t){e.onComposition(t,"input")}]}}),e._v(" "),i("a",{directives:[{name:"show",rawName:"v-show",value:e.currentValue,expression:"currentValue"}],staticClass:"weui-icon-clear",attrs:{href:"javascript:"},on:{click:e.clear}})]),e._v(" "),i("label",{directives:[{name:"show",rawName:"v-show",value:!e.isFocus&&!e.value,expression:"!isFocus && !value"}],staticClass:"weui-search-bar__label",attrs:{for:"search_input_"+e.uuid}},[i("i",{staticClass:"weui-icon-search"}),e._v(" "),i("span",[e._v(e._s(e.placeholder||"搜索"))])])]),e._v(" "),i("a",{staticClass:"weui-search-bar__cancel-btn",attrs:{href:"javascript:"},on:{click:e.cancel}},[e._v(e._s(e.cancelText||"取消")+"\n    ")]),e._v(" "),e._t("right")],2),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isFixed,expression:"isFixed"}],staticClass:"weui-cells vux-search_show"},[e._t("default"),e._v(" "),e._l(e.results,function(t){return i("div",{staticClass:"weui-cell weui-cell_access",on:{click:function(i){e.handleResultClick(t)}}},[i("div",{staticClass:"weui-cell__bd weui-cell_primary"},[i("p",[e._v(e._s(t.title))])])])})],2)])},staticRenderFns:[]};var c=i("VU/8")(o,r,!1,function(e){i("2qUn")},null,null).exports,u=i("f6Hi"),l=i("q5lo"),d=function(){return{options:{type:Array,required:!0},value:[String,Number],fillMode:{type:Boolean,default:!1},fillPlaceholder:{type:String,default:"其他"},fillLabel:{type:String,default:"其他"},disabled:Boolean,selectedLabelStyle:Object}};u.a,l.e,l.b,d(),l.e,l.b;var h={name:"radio",mixins:[u.a],filters:{getValue:l.e,getKey:l.b},props:d(),created:function(){this.handleChangeEvent=!0},methods:{getValue:l.e,getKey:l.b,onFocus:function(){this.currentValue=this.fillValue||"",this.isFocus=!0}},watch:{value:function(e){this.currentValue=e},currentValue:function(e){var t=function(e,t){var i=e.length;for(;i--;)if(e[i]===t)return!0;return!1}(this.options,e);""!==e&&t&&(this.fillValue=""),this.$emit("on-change",e,Object(l.c)(this.options,e)),this.$emit("input",e)},fillValue:function(e){this.fillMode&&this.isFocus&&(this.currentValue=e)}},data:function(){return{fillValue:"",isFocus:!1,currentValue:this.value}}};var f={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"weui-cells_radio",class:e.disabled?"vux-radio-disabled":""},[e._l(e.options,function(t,s){return i("label",{staticClass:"weui-cell weui-cell_radio weui-check__label",attrs:{for:"radio_"+e.uuid+"_"+s}},[i("div",{staticClass:"weui-cell__bd"},[e._t("each-item",[i("p",[i("img",{directives:[{name:"show",rawName:"v-show",value:t&&t.icon,expression:"one && one.icon"}],staticClass:"vux-radio-icon",attrs:{src:t.icon}}),e._v(" "),i("span",{staticClass:"vux-radio-label",style:e.currentValue===e.getKey(t)&&e.selectedLabelStyle||""},[e._v(e._s(e._f("getValue")(t)))])])],{icon:t.icon,label:e.getValue(t),index:s,selected:e.currentValue===e.getKey(t)})],2),e._v(" "),i("div",{staticClass:"weui-cell__ft"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticClass:"weui-check",attrs:{type:"radio",id:e.disabled?"":"radio_"+e.uuid+"_"+s},domProps:{value:e.getKey(t),checked:e._q(e.currentValue,e.getKey(t))},on:{change:function(i){e.currentValue=e.getKey(t)}}}),e._v(" "),i("span",{staticClass:"weui-icon-checked"})])])}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.fillMode,expression:"fillMode"}],staticClass:"weui-cell"},[i("div",{staticClass:"weui-cell__hd"},[i("label",{staticClass:"weui-label",attrs:{for:""}},[e._v(e._s(e.fillLabel))])]),e._v(" "),i("div",{staticClass:"weui-cell__bd"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.fillValue,expression:"fillValue"}],staticClass:"weui-input needsclick",attrs:{type:"text",placeholder:e.fillPlaceholder},domProps:{value:e.fillValue},on:{blur:function(t){e.isFocus=!1},focus:function(t){e.onFocus()},input:function(t){t.target.composing||(e.fillValue=t.target.value)}}})]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:""===e.value&&!e.isFocus,expression:"value==='' && !isFocus"}],staticClass:"weui-cell__ft"},[i("i",{staticClass:"weui-icon-warn"})])])],2)},staticRenderFns:[]};var p=i("VU/8")(h,f,!1,function(e){i("ZxaL")},null,null).exports,v=i("kUU7"),m=i("4leg"),w=(v.a,m.a,Array,Object,{name:"RecordList",components:{RecordGroup:v.a,RecordFooter:m.a,Search:c,Radio:p},props:{recordList:{type:[Array,Object],default:function(){return[{statusBefore:"正常",statusAfter:"异常",type:"维修整改",result:"",date:"20180621",time:"1425",user:"公开用户"},{statusBefore:"正常",statusAfter:"正常",type:"配电箱每日巡检",result:"",date:"20180622",time:"1422",user:"公开用户"},{statusBefore:"正常",statusAfter:"已维修",type:"日常巡检",result:"",date:"20180623",time:"1429",user:"公开用户"},{statusBefore:"正常",statusAfter:"",type:"维修整改",result:"",date:"20180624",time:"1427",user:"公开用户"},{statusBefore:"正常",statusAfter:"正常",type:"配电箱每日巡检",result:"",date:"20180625",time:"1423",user:"公开用户"},{statusBefore:"正常",statusAfter:"已维修",type:"配电箱每日巡检",result:"",date:"20180626",time:"1426",user:"公开用户"},{statusBefore:"正常",statusAfter:"已维修",type:"配电箱每日巡检",result:"",date:"20180626",time:"1429",user:"公开用户"},{statusBefore:"正常",statusAfter:"正常",type:"配电箱每日巡检",result:"",date:"20180627",time:"1423",user:"公开用户"},{statusBefore:"正常",statusAfter:"异常",type:"日常巡检",result:"",date:"20180628",time:"1428",user:"非公开用户"},{statusBefore:"正常",statusAfter:"异常",type:"日常巡检",result:"",date:"20180629",time:"1429",user:"非公开用户"}]}}},data:function(){return{search:"",results:[],radioList:["记录类型","记录时间","记录人"],showRadio:!1,recordType:"记录类型",preRadio:"",showSearch:!0,showDate:!1,startTime:"",endTime:"",showGroup:!0,showRecordFooter:!0,showStatusChange:!0,isGroupMarginTop:!1,cloneRecordList:[]}},computed:{formatStartTime:function(){return this.formatTime(this.startTime)},formatEndTime:function(){return this.formatTime(this.endTime)}},mounted:function(){var e=this.recordList;this.cloneRecordList=e},methods:{changeRadio:function(e,t){switch(console.log(this.preRadio),console.log("change:",e,t),e){case"记录类型":this.recordType="记录类型";break;case"记录时间":this.recordType="记录时间",this.showSearch=!1,this.showDate=!0;break;case"记录人":this.recordType="记录人"}},clickRadio:function(){this.showRadio=!1},clickCancel:function(){location.reload()},changeStartTime:function(e){var t,i=this,s=[];t=""==this.formatEndTime?119950511:this.formatEndTime,this.recordList.forEach(function(e){i.formatStartTime<=e.date&&e.date<=t&&s.unshift(e)}),this.cloneRecordList=s},changeEndTime:function(e){var t=this,i=[];this.recordList.forEach(function(e){t.formatStartTime<=e.date&&e.date<=t.formatEndTime&&(console.log(e.date),i.unshift(e))}),this.cloneRecordList=i},formatTime:function(e){return e.replace(/-/g,"")},changeSearch:function(e){if(console.log("on-change",e),console.log(this.search),""==e)return!1;var t=[];switch(this.recordType){case"记录类型":this.recordList.forEach(function(i){-1!=i.type.indexOf(e)&&t.unshift(i)});break;case"记录人":this.recordList.forEach(function(i){-1!=i.user.indexOf(e)&&t.unshift(i)})}this.cloneRecordList=t},onSubmit:function(){this.$refs.search.setBlur(),this.$vux.toast.show({type:"text",position:"top",text:"on submit"})},onFocus:function(){this.showRadio=!1,this.isGroupMarginTop=!0},onCancel:function(){this.isGroupMarginTop=!1,location.reload()},setFocus:function(){this.$refs.search.setFocus()},resultClick:function(e){window.alert("you click the result item: "+n()(e))}},filters:{}}),_={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"record-list"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],staticClass:"search-block"},[i("div",{staticClass:"search-type",on:{click:function(t){e.showRadio=!e.showRadio}}},[i("span",[e._v(e._s(e.recordType))])]),e._v(" "),i("search",{ref:"search",staticClass:"search",attrs:{results:e.results,position:"absolute","auto-scroll-to-top":"",top:"0px"},on:{"on-result-click":e.resultClick,"on-change":e.changeSearch,"on-focus":e.onFocus,"on-cancel":e.onCancel,"on-submit":e.onSubmit},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showDate,expression:"showDate"}],staticClass:"date-block"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.startTime,expression:"startTime"}],attrs:{type:"date",name:"startTime"},domProps:{value:e.startTime},on:{change:e.changeStartTime,input:function(t){t.target.composing||(e.startTime=t.target.value)}}}),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.endTime,expression:"endTime"}],attrs:{type:"date",name:"endTime"},domProps:{value:e.endTime},on:{change:e.changeEndTime,input:function(t){t.target.composing||(e.endTime=t.target.value)}}}),e._v(" "),i("span",{on:{click:e.clickCancel}},[e._v("取消")])]),e._v(" "),i("radio",{directives:[{name:"show",rawName:"v-show",value:e.showRadio,expression:"showRadio"}],staticClass:"radio",attrs:{options:e.radioList,value:"记录类型"},on:{"on-change":e.changeRadio},nativeOn:{click:function(t){return e.clickRadio(t)}}}),e._v(" "),i("RecordGroup",{class:{groupMarginTop:e.isGroupMarginTop},attrs:{recordList:e.cloneRecordList}}),e._v(" "),i("p",{staticStyle:{"text-align":"center"}},[e._v("没有更多数据")]),e._v(" "),i("RecordFooter",{directives:[{name:"show",rawName:"v-show",value:e.showRecordFooter,expression:"showRecordFooter"}]})],1)},staticRenderFns:[]};var g=i("VU/8")(w,_,!1,function(e){i("B+dZ")},null,null);t.default=g.exports},ZxaL:function(e,t){},f6Hi:function(e,t,i){"use strict";var s=i("OFgA");t.a={mixins:[s.a],props:{required:{type:Boolean,default:!1}},created:function(){this.handleChangeEvent=!1},computed:{dirty:{get:function(){return!this.pristine},set:function(e){this.pristine=!e}},invalid:function(){return!this.valid}},methods:{setTouched:function(){this.touched=!0}},watch:{value:function(e){!0===this.pristine&&(this.pristine=!1),this.handleChangeEvent||(this.$emit("on-change",e),this.$emit("input",e))}},data:function(){return{errors:{},pristine:!0,touched:!1}}}},q5lo:function(e,t,i){"use strict";i.d(t,"e",function(){return a}),i.d(t,"b",function(){return o}),i.d(t,"a",function(){return r}),i.d(t,"c",function(){return c}),i.d(t,"d",function(){return u});var s=i("pFYg"),n=i.n(s),a=function(e){return"object"===(void 0===e?"undefined":n()(e))?e.value:e},o=function(e){return"object"===(void 0===e?"undefined":n()(e))?e.key:e},r=function(e){return"object"===(void 0===e?"undefined":n()(e))?e.inlineDesc:""},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(!e.length)return t;if("string"==typeof e[0])return t;var i=e.filter(function(e){return e.key===t});return i.length?i[0].value||i[0].label:t},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map(function(t){return c(e,t)})}}});